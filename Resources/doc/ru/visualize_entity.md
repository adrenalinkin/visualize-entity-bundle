Конфигурационный файл visualize_entity.yml [![In English](https://img.shields.io/badge/Switch_To-English-green.svg?style=flat-square)](../en/visualize_entity.md)
==========================================

Для организации отображаемых данных используется конфигурационный файл `visualize_entity.yml`,
который необходимо поместить в любом удобном бандле в папку `/Resources/config`.

**Рекомендуется** создать отдельную папку `/Resources/config/linkin` и поместить конфигурационный файл в нее, чтобы
отделить системные конфигурационные файлы `Symfony` от побочных.

Описание конфигурации
---------------------

**linkin_visualize_entity** - корневое значения, определяющее принадлежность к VisualizeEntityBundle.
Любой конфигурационный файл `visualize_entity.yml` должен начинаться с этого ключа.

На втором уровне конфигурации лежат уникальные названия конфигураций. Названия конфигураций должны быть уникальны в
рамках всего проекта (а не только одного файла или бандла). При этом каждая отдельная конфигурация имеет следующие
смещения на третьем уровне:

| Параметр              | Обязательный | Тип    | По умолчанию | Описание                                                |
|:----------------------|:------------:|:------:|:------------:|---------------------------------------------------------|
| **className**         | Да           | `string` |            | Название класса сущности, которую нужно будет отобразить |
| **label_translation** | Нет          | `array`  |            | Группа параметров перевода заголовков полей, если данное смещение не задано явно, то перевод заголовков не будет осуществляться, а заголовки будут формироваться из названия полей автоматически |
| **fields**            | Да           | `array`  |            | Набор полей сущности, которые необходимо отобразить. Каждое поле вызывает геттер прибавляя приставку `get` к названию поля |

### Доступные настройки внутри label_translation

| Параметр   | Обязательный | Тип    | По умолчанию | Описание                                                |
|:-----------|:------------:|:------:|:------------:|---------------------------------------------------------|
| **domain** | Нет          | `string` | `null`     | Строка домена для переводов |
| **prefix** | Нет          | `string` | `null`     | Префикс для всех заголовков полей. Применяется если у поля не задано значения заголовка явно, при помощи параметра `label` |

### Доступные настройки внутри fields

| Параметр               | Обязательный | Тип    | По умолчанию | Описание                                                |
|:-----------------------|:------------:|:------:|:------------:|---------------------------------------------------------|
| **getter**             | Нет          | string | `null`       | Явно заданный геттер, чтобы получить значение поля |
| **label**              | Нет          | string | `null`       | Явно заданное значение заголовка |
| **visualizer**         | Нет          | string | `null`       | Идентификатор сервиса визуализатора, который нужно применить. Отменяет автоматический подбор и вызывает конкретный визуализатор |
| **visualizer_options** | Нет          | array  | `null`       | Набор произвольных опций визуализатора |

### Полное представление всех смещений конфигурации

```yaml
linkin_visualize_entity:                         # корневое значения, определяет принадлежность к VisualizeEntityBundle
    acme_user_default:                           # уникальное наименование конфигурации
        className:    AcmeBundle:User            # имя класса сущности, которую нужно будет отобразить
        label_translation:                       # группа параметров перевода заголовков полей
            domain:  acme_messages               # домен переводов
            prefix:  'app.user.fields.'          # префикс, который будет добавлен к каждому полю конфигурации,
                                                 # что в итоге образует строку, которая будет использована как
                                                 # ID перевода (для username это app.user.fields.username)
        fields:                                  # список полей, который необходимо отобразить
            username: ~                          # название поля,должно соответствовать геттеру без приставки get
            roles:
                getter: getRoles                 # явно заданный геттер, чтобы получить значение поля
                label: 'app.user.fields.roles'   # явно заданное значение заголовка
                visualizer: app.visualizer.some  # явно заданный визуализатор для поля, соответствует ID сервиса
                visualizer_options:              # набор опций визуализатора
                    myOption: optionValue        # опция и значение, которое будет передано в визуализатор
```

Примеры конфигураций
--------------------

### Без использования переводов

Представленная конфигурация отобразит заголовки полей без использования переводов. При этом все названия будут приведены
к большой букве и разделены на слова относительно больших букв. Форматирование не применяется для явно заданных
заголовков. Таким образом будут сформированы следующие заголовки `Username`, `First Name`, `myRoles`.

```yaml
linkin_visualize_entity:
    acme_user_default:
        className:    AcmeBundle:User
        fields:
            username: ~
            firstName: ~
            roles:
                label: 'myRoles'
```

### Использование префикса переводов

Представленная конфигурация будет отображать заголовки полей используя систему переводов. Заголовки будут сформированы
конкатенацией названия поля и заданного префикса. Так для поля *username* будет сформирован заголовок
`app.user.fields.username` и его перевод будет искать в доменном пространстве переводов `acme_messages`. Заданное явно
значение заголовка для поля *roles* будет использоваться как есть. Таким образом для поля *roles* будет использован
заголовок `app.user.fields.my_roles_label` и его перевод будет искать в доменном пространстве переводов `acme_messages`.

```yaml
linkin_visualize_entity:
    acme_user_default:
        className:    AcmeBundle:User
        label_translation:
            domain:  acme_messages
            prefix:  'app.user.fields.'
        fields:
            username: ~
            roles:
                label: 'app.user.fields.my_roles_label'
```

### Использование явно заданного визуализатора и опций

Представленная конфигурация будет отображать данные поля *roles* используя явно заданный визуализатор и при этом
применит переданные опции. Будет отображено не более 5 значений поля *roles* и они будут разделены `; `.

```yaml
linkin_visualize_entity:
    acme_user_default:
        className:    AcmeBundle:User
        fields:
            username: ~
            roles:
                visualizer: linkin_visualize_entity.visualizer.doctrine_collection
                visualizer_options:
                    limit: 5
                    delimiter: '; '
```

### Использование шаблона для объектов

Представленная конфигурация будет отображать данные поля *roles* используя заданный шаблон. Таким образом если роль
имеет `title = User` и `role = ROLE_USER`, то будет отображена строка `User (<b>ROLE_USER</b>)`.

**Внимание**:Визуализатор объекта будет применен автоматически так как сначала вызывается `ArrayVisualizer`,
который вызовет для каждого объекта роли `ObjectVisualizer`.

```yaml
linkin_visualize_entity:
    acme_user_default:
        className:    AcmeBundle:User
        fields:
            username: ~
            roles:
                visualizer_options:
                    template: 'getTitle (<b>getRole</b>)'
                    getters_array:
                        - getTitle
                        - getRole
```
